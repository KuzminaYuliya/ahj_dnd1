{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/CardStorage.js","webpack:///./src/js/app.js","webpack:///./src/js/TrelloWidget.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CardStorage","data","localStorage","setItem","JSON","stringify","getItem","this","container","document","querySelector","todoList","getElementById","progressList","doneList","forms","Array","from","parent","draggedEl","ghostEl","topDiff","leftDiff","addEventListener","load","event","target","classList","contains","targetForm","parentElement","add","preventDefault","closest","reset","remove","deletedCard","removeChild","save","cloneNode","body","appendChild","style","cursor","width","offsetWidth","top","left","getBoundingClientRect","pageY","pageX","targetCard","relatedTarget","elementFromPoint","clientX","clientY","window","scrollY","offsetHeight","insertBefore","nextElementSibling","stopMove","forEach","el","isValid","currentTarget","checkValidity","input","elements","targetList","addCard","card","createElement","className","innerHTML","todoCards","querySelectorAll","progressCards","doneCards","todo","progress","done","push","textContent","replace","parse","action"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/* eslint-disable linebreak-style */\r\nexport default class CardStorage {\r\n  static save(data) {\r\n    localStorage.setItem('cards', JSON.stringify(data));\r\n  }\r\n\r\n  static load() {\r\n    return localStorage.getItem('cards');\r\n  }\r\n}\r\n","/* eslint-disable linebreak-style */\r\nimport TrelloWidget from './TrelloWidget';\r\n\r\nconst trello = new TrelloWidget();\r\ntrello.action();\r\n","/* eslint-disable linebreak-style */\r\nimport CardStorage from './CardStorage';\r\n\r\nexport default class TrelloWidget {\r\n  constructor() {\r\n    this.container = document.querySelector('.cards-wrapper');\r\n    this.todoList = document.getElementById('todo').querySelector('.cards');\r\n    this.progressList = document.getElementById('progress').querySelector('.cards');\r\n    this.doneList = document.getElementById('done').querySelector('.cards');\r\n    this.forms = Array.from(document.forms);\r\n    this.parent = null;\r\n    this.draggedEl = null;\r\n    this.ghostEl = null;\r\n    this.topDiff = null;\r\n    this.leftDiff = null;\r\n  }\r\n\r\n  action() {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      this.load();\r\n    });\r\n    this.container.addEventListener('mousedown', (event) => {\r\n      if (event.target.classList.contains('add-card')) {\r\n        const targetForm = event.target.parentElement.querySelector('.card-form');\r\n        if (!targetForm.classList.contains('card-form-active')) {\r\n          targetForm.classList.add('card-form-active');\r\n        }\r\n      } else if (event.target.classList.contains('cancel-button')) {\r\n        event.preventDefault();\r\n        const targetForm = event.target.closest('.card-form');\r\n        targetForm.reset();\r\n        targetForm.classList.remove('card-form-active');\r\n      } else if (event.target.classList.contains('delete-button-active')) {\r\n        event.preventDefault();\r\n        const deletedCard = event.target.parentElement;\r\n        event.target.closest('.cards').removeChild(deletedCard);\r\n        this.save();\r\n      } else if (event.target.classList.contains('card-item')) {\r\n        event.preventDefault();\r\n        event.target.querySelector('.delete-button').classList.remove('delete-button-active');\r\n        event.target.classList.remove('card-item-active');\r\n        this.draggedEl = event.target;\r\n        this.ghostEl = event.target.cloneNode(true);\r\n        this.ghostEl.classList.add('dragged');\r\n        document.body.appendChild(this.ghostEl);\r\n        document.body.style.cursor = 'grabbing';\r\n        this.ghostEl.style.width = `${this.draggedEl.offsetWidth}px`;\r\n        const { top, left } = this.draggedEl.getBoundingClientRect();\r\n        this.topDiff = event.pageY - top;\r\n        this.leftDiff = event.pageX - left;\r\n        this.ghostEl.style.left = `${left}px`;\r\n        this.ghostEl.style.top = `${top}px`;\r\n      }\r\n    });\r\n    this.container.addEventListener('mouseover', (event) => {\r\n      event.preventDefault();\r\n      if (this.draggedEl) return;\r\n      if (event.target.classList.contains('card-item')) {\r\n        const targetCard = event.target;\r\n        targetCard.classList.add('card-item-active');\r\n        targetCard.querySelector('.delete-button').classList.add('delete-button-active');\r\n      }\r\n    });\r\n    this.container.addEventListener('mouseout', (event) => {\r\n      event.preventDefault();\r\n      if (event.target.classList.contains('card-item') && !event.relatedTarget.classList.contains('delete-button')) {\r\n        const targetCard = event.target;\r\n        targetCard.classList.remove('card-item-active');\r\n        targetCard.querySelector('.delete-button').classList.remove('delete-button-active');\r\n      }\r\n    });\r\n    this.container.addEventListener('mousemove', (event) => {\r\n      event.preventDefault();\r\n      if (this.draggedEl) {\r\n        this.ghostEl.style.left = `${event.pageX - this.leftDiff}px`;\r\n        this.ghostEl.style.top = `${event.pageY - this.topDiff}px`;\r\n      }\r\n    });\r\n    this.container.addEventListener('mouseup', (event) => {\r\n      if (this.draggedEl) {\r\n        const target = document.elementFromPoint(event.clientX, event.clientY);\r\n        const { top } = target.getBoundingClientRect();\r\n        const parent = target.closest('.cards');\r\n        if (parent && parent !== target) {\r\n          if (event.pageY > window.scrollY + top + target.offsetHeight / 2) {\r\n            parent.insertBefore(this.draggedEl, target.nextElementSibling);\r\n          } else {\r\n            parent.insertBefore(this.draggedEl, target);\r\n          }\r\n          this.stopMove();\r\n          this.save();\r\n        } else if (parent) {\r\n          parent.appendChild(this.draggedEl);\r\n          this.stopMove();\r\n          this.save();\r\n        } else {\r\n          this.stopMove();\r\n          this.save();\r\n        }\r\n      }\r\n    });\r\n    this.forms.forEach((el) => {\r\n      el.addEventListener('submit', (event) => {\r\n        event.preventDefault();\r\n        const isValid = event.currentTarget.checkValidity();\r\n        const input = [...el.elements][0];\r\n        if (isValid) {\r\n          const targetList = el.closest('.cards-column').querySelector('.cards');\r\n          this.addCard(targetList, input.value);\r\n          el.reset();\r\n          el.classList.remove('card-form-active');\r\n          this.save();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  addCard(parent, value) {\r\n    this.parent = parent;\r\n    const card = document.createElement('div');\r\n    card.className = 'card-item';\r\n    card.innerHTML = `${value} <span class='delete-button'>✕</span>`;\r\n    this.parent.appendChild(card);\r\n  }\r\n\r\n  save() {\r\n    const todoCards = this.todoList.querySelectorAll('.card-item');\r\n    const progressCards = this.progressList.querySelectorAll('.card-item');\r\n    const doneCards = this.doneList.querySelectorAll('.card-item');\r\n\r\n    const data = {\r\n      todo: [],\r\n      progress: [],\r\n      done: [],\r\n    };\r\n\r\n    todoCards.forEach((el) => {\r\n      data.todo.push(el.textContent.replace(' ✕', ''));\r\n    });\r\n\r\n    progressCards.forEach((el) => {\r\n      data.progress.push(el.textContent.replace(' ✕', ''));\r\n    });\r\n\r\n    doneCards.forEach((el) => {\r\n      data.done.push(el.textContent.replace(' ✕', ''));\r\n    });\r\n\r\n    CardStorage.save(data);\r\n  }\r\n\r\n  load() {\r\n    const data = JSON.parse(CardStorage.load());\r\n    if (data) {\r\n      data.todo.forEach((el) => {\r\n        this.addCard(this.todoList, el);\r\n      });\r\n      data.progress.forEach((el) => {\r\n        this.addCard(this.progressList, el);\r\n      });\r\n      data.done.forEach((el) => {\r\n        this.addCard(this.doneList, el);\r\n      });\r\n    }\r\n  }\r\n\r\n  stopMove() {\r\n    document.body.removeChild(this.ghostEl);\r\n    document.body.style.cursor = 'auto';\r\n    this.ghostEl = null;\r\n    this.draggedEl = null;\r\n  }\r\n}\r\n"],"sourceRoot":""}